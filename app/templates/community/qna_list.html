{% extends "base.html" %}

{% block title %}질의응답 - 커뮤니티{% endblock %}

{% block content %}
<div class="list-container">
    <div class="list-header">
        <div>
            <a href="{{ url_for('community.index', tab='qna') }}" class="back-link">
                <i class="bi bi-arrow-left"></i> 커뮤니티
            </a>
            <h1>질의응답</h1>
        </div>
        {% if current_user.is_authenticated %}
        <a href="{{ url_for('community.create_qna') }}" class="btn-create">
            <i class="bi bi-plus-lg"></i> 질문하기
        </a>
        {% endif %}
    </div>
    
    <div class="filter-tabs">
        <a href="{{ url_for('community.qna_list', filter='all') }}" class="{{ 'active' if filter_type == 'all' else '' }}">전체</a>
        <a href="{{ url_for('community.qna_list', filter='unresolved') }}" class="{{ 'active' if filter_type == 'unresolved' else '' }}">미해결</a>
        <a href="{{ url_for('community.qna_list', filter='resolved') }}" class="{{ 'active' if filter_type == 'resolved' else '' }}">해결됨</a>
    </div>
    
    {% if qna_posts.items %}
    <div class="qna-list">
        {% for post in qna_posts.items %}
        <a href="{{ url_for('community.qna_detail', post_id=post.id) }}" class="qna-item">
            <div class="qna-status {{ 'resolved' if post.is_resolved else 'unresolved' }}">
                {% if post.is_resolved %}<i class="bi bi-check-circle-fill"></i>{% else %}<i class="bi bi-hourglass"></i>{% endif %}
            </div>
            <div class="qna-content">
                <h3>{{ post.title }}</h3>
                <div class="qna-meta">
                    <span>{{ post.user.display_name }}</span>
                    <span>{{ post.created_at.strftime('%Y-%m-%d') }}</span>
                    <span><i class="bi bi-eye"></i> {{ post.views_count }}</span>
                    <span><i class="bi bi-chat-dots"></i> {{ post.answer_count }}</span>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    
    {% if qna_posts.pages > 1 %}
    <nav class="pagination">
        {% if qna_posts.has_prev %}<a href="{{ url_for('community.qna_list', page=qna_posts.prev_num, filter=filter_type) }}">&laquo; 이전</a>{% endif %}
        <span>{{ qna_posts.page }} / {{ qna_posts.pages }}</span>
        {% if qna_posts.has_next %}<a href="{{ url_for('community.qna_list', page=qna_posts.next_num, filter=filter_type) }}">다음 &raquo;</a>{% endif %}
    </nav>
    {% endif %}
    {% else %}
    <div class="empty-state">
        <i class="bi bi-question-circle"></i>
        <p>등록된 질문이 없습니다.</p>
    </div>
    {% endif %}
</div>

<style>
.list-container { max-width: 900px; margin: 0 auto; }
.list-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1.5rem; }
.back-link { color: var(--app-text-muted); text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; font-size: 0.9rem; }
.list-header h1 { font-size: 1.5rem; font-weight: 700; color: var(--app-text); }
.btn-create { padding: 0.625rem 1.25rem; background: linear-gradient(135deg, #3b82f6, #8b5cf6); color: #fff !important; border-radius: 10px; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 0.5rem; }
.filter-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; }
.filter-tabs a { padding: 0.5rem 1rem; background: var(--app-input-bg); border: 1px solid var(--app-border); border-radius: 8px; color: var(--app-text-muted); text-decoration: none; font-size: 0.9rem; }
.filter-tabs a.active, .filter-tabs a:hover { background: linear-gradient(135deg, #3b82f6, #8b5cf6); color: #fff; border-color: transparent; }
.qna-list { display: flex; flex-direction: column; gap: 1rem; }
.qna-item { display: flex; align-items: flex-start; gap: 1rem; background: var(--app-card-bg); border: 1px solid var(--app-border); border-radius: 12px; padding: 1.25rem; text-decoration: none; transition: all 0.2s ease; }
.qna-item:hover { border-color: rgba(59, 130, 246, 0.3); }
.qna-status { padding: 0.375rem 0.75rem; border-radius: 8px; font-size: 0.8rem; font-weight: 600; }
.qna-status.resolved { background: rgba(16, 185, 129, 0.1); color: #10b981; }
.qna-status.unresolved { background: rgba(245, 158, 11, 0.1); color: #f59e0b; }
.qna-content { flex: 1; }
.qna-content h3 { font-size: 1rem; font-weight: 600; color: var(--app-text); margin-bottom: 0.5rem; }
.qna-meta { display: flex; gap: 1rem; font-size: 0.85rem; color: var(--app-text-muted); }
.pagination { display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 2rem; }
.pagination a { color: #3b82f6; text-decoration: none; }
.empty-state { text-align: center; padding: 4rem 2rem; background: var(--app-card-bg); border: 1px solid var(--app-border); border-radius: 16px; }
.empty-state i { font-size: 3rem; color: var(--app-text-muted); }
</style>
{% endblock %}
