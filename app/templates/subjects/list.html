{% extends "base.html" %}

{% block title %}과목 목록 - 학습 진도 트래커{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold"><i class="bi bi-book me-2 text-primary"></i>과목 목록</h2>
    {% if current_user.is_instructor() %}
    <a href="{{ url_for('subjects.create') }}" class="btn btn-primary">
        <i class="bi bi-plus-lg me-1"></i>새 과목 만들기
    </a>
    {% endif %}
</div>

{% if subjects %}
<div class="row g-4">
    {% for subject in subjects %}
    <div class="col-md-6 col-lg-4">
        <div class="glass-card p-4 h-100">
            <div class="d-flex justify-content-between align-items-start mb-3">
                <h5 class="fw-bold mb-0">{{ subject.title }}</h5>
                <span class="badge bg-primary bg-opacity-10 text-primary">
                    {{ subject.courses.count() }}개 세션
                </span>
            </div>
            {% if subject.description %}
            <p class="text-muted small mb-3">{{ subject.description[:100] }}{% if subject.description|length > 100 %}...{% endif %}</p>
            {% endif %}
            <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted">
                    <i class="bi bi-calendar me-1"></i>{{ subject.created_at.strftime('%Y-%m-%d') }}
                </small>
                <a href="{{ url_for('subjects.view', subject_id=subject.id) }}" class="btn btn-outline-primary btn-sm">
                    상세보기 <i class="bi bi-arrow-right ms-1"></i>
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="glass-card p-5 text-center">
    <i class="bi bi-book display-1 text-muted mb-3"></i>
    {% if current_user.is_instructor() %}
    <h5 class="fw-bold">아직 생성된 과목이 없습니다</h5>
    <p class="text-muted">새 과목을 만들어 주차별 세션을 관리해보세요.</p>
    <a href="{{ url_for('subjects.create') }}" class="btn btn-primary">
        <i class="bi bi-plus-lg me-1"></i>첫 과목 만들기
    </a>
    {% else %}
    <h5 class="fw-bold">등록된 과목이 없습니다</h5>
    <p class="text-muted">강사에게 과목 초대 코드를 받아 등록해주세요.</p>
    {% endif %}
</div>
{% endif %}
{% endblock %}
